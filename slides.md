---
layout: cover
highlighter: shiki
---

<div class="tracking-widest" style="font-size: 40px">
ä½¿ç”¨ <span style="color: #90a697;font-weight: bold">Next.js</span> å’Œ <span style="color: #90a697;font-weight: bold">Turbopack</span> æ­å»ºé¡¹ç›®
</div>

<div class="uppercase text-sm tracking-widest my-10">
Lzzzs
</div>

---

# æ¢æŒ¯èƒœ

<div class="leading-8 opacity-80">
å‰ç«¯çˆ±å¥½è€…ï¼Œå–œæ¬¢æ¢ç´¢æ–°æŠ€æœ¯<br>
å¼€æºçˆ±å¥½è€…ï¼Œæ¢¦æƒ³åšå…¨èŒå¼€æº<br>
<strong><a href="https://vue-macros.sxzz.moe/zh-CN/" target="_blank">unplugin-vue-macros</a></strong> ä¸­æ–‡æ–‡æ¡£ç¼–å†™è€…<br>
<br>
</div>

<div class="my-10 grid grid-cols-[40px,1fr] w-min gap-y-4">
  <ri-github-line class="opacity-50"/>
  <div><a href="https://github.com/Lzzzs" target="_blank">Lzzzs</a></div>
  <ri-twitter-line class="opacity-50"/>
  <div><a href="https://twitter.com/lzzzzzzzssssss" target="_blank">lzzzzzzzssssss</a></div>
  <ri-user-3-line class="opacity-50"/>
  <div><a href="http://lzzzs.top" target="_blank">lzzzs.top</a></div>
</div>

## <img src="https://avatars.githubusercontent.com/u/74575471?v=4" class="rounded-full w-40 abs-tr mt-16 mr-12"/>

---

<div class="flex">
  <h1><strong><i>Next.js</i></strong> æ˜¯ä»€ä¹ˆï¼Ÿ</h1>
  <h1 v-click>âœ…</h1>
</div>
<div class="flex"  style="margin-top:40px">
  <h1 v-click tracking-widest>ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨ <strong><i>Next.js</i></strong> è€Œä¸æ˜¯ <strong><i>React.js</i></strong> ï¼Ÿ</h1>
  <h1 v-click>âœ…</h1>
</div>
<div class="flex" style="margin-top:40px">
  <h1 v-click><strong><i> Turbopack </i></strong> æ˜¯ä»€ä¹ˆï¼Ÿ</h1>
  <h1 v-click>âœ…</h1>
</div>
<div class="flex" style="margin-top:40px">
  <h1 v-click>ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨ <strong><i>Turbopack</i></strong> è€Œä¸æ˜¯ <strong><i>Vite</i></strong> ï¼Ÿ</h1>
  <h1 v-click>âœ…</h1>
</div>

---

# åŒ…ç®¡ç†å™¨çš„é€‰æ‹©

<div class="flex"  style="margin-top:20px">
  <h2 v-click> npm / cnpm </h2>
  <h2 v-click class="ml-6">ğŸ™…â€â™‚ï¸</h2>
</div>

<div class="flex" style="margin-top:40px">
  <h2 v-click> Yarn </h2>
  <h2 v-click style="margin-left: 120px;">ğŸ™…â€â™‚ï¸</h2>
</div>

<img v-click src="/node_modules.webp" class="abs-tr" style="width: 300px;height: 150px;top:100px;right: 20px" />

<div class="flex" style="margin-top:40px">
  <h2 v-click> Bun </h2>
  <h2 v-click class="ml-6" style="margin-left: 125px;">ğŸ§ª</h2>
</div>

<img v-click src="/Bun.jpg" class="abs-tr" style="top: 43%; left: 40%"  />

<div class="flex" style="margin-top:40px">
  <h2 v-click> pnpm </h2>
  <h2 v-click class="ml-6" style="margin-left: 100px;">ğŸ’˜</h2>
</div>

<img v-click src="/ni.jpg" class="abs-tr" style="width: 300px;height: 250px;top: 50%; right:20px"  />

---

# è¯­è¨€é€‰æ‹©

<h3 v-click>
 ?? JavaScript ??
</h3>

<h3 v-click style="margin-top: 30px;">
<strong><span style="color: red;">Type</span>Script</strong> !!!
</h3>

<ul style="padding-left: 20px; padding-top: 20px;">
  <li v-click>å¼ºç±»å‹ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹ï¼ˆ<u>æ›´å®¹æ˜“å†™å‡º<strong>å¥å£®æ€§</strong>é«˜çš„ä»£ç </u>ï¼‰</li>
  <li v-click>åœ¨ç¼–è¯‘æœŸé—´å¯ä»¥æ£€æµ‹å’Œä¿®å¤é”™è¯¯</li>
  <li v-click>æ”¯æŒæ¨¡å—ã€æ³›å‹å’Œæ¥å£</li>
  <li v-click>...</li>
</ul>

<h1 v-click style="margin-top: 30px;">
  <div>â†‘</div>
  <span style="color: green;">any</span>ScriptğŸ¤¡
</h1>

---

# é›†æˆ Next.js

<div v-click>

- åˆ›å»ºæ–‡ä»¶å¤¹

</div>

<div v-click>

- åˆå§‹åŒ– `package.json`

```shell
# è¿›å…¥åˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯
npm init -y
```

</div>

<div v-click>

- å®‰è£…ä¾èµ–

```shell
pnpm add next@latest react@latest react-dom@latest
# æˆ–ä½¿ç”¨niå®‰è£…ä¾èµ–åŒ…ï¼Œåé¢é»˜è®¤éƒ½ä½¿ç”¨ni
ni next@latest react@latest react-dom@latest
```

</div>

<div v-click>

- åœ¨ `package.json` ä¸­æ·»åŠ  scripts è„šæœ¬

```json
{
  ...
  "scripts": {
    "dev": "next dev --turbo",
    "build": "next build",
  }
  ...
}
```

</div>

---

- æ ¹ç›®å½•ä¸‹åˆ›å»º **app** æ–‡ä»¶å¤¹
- åœ¨ **app** æ–‡ä»¶å¤¹åˆ†åˆ«åˆ›å»º **layout.tsx** å’Œ **page.tsx**

```tsx {1|2-8|all}
// layout.tsx
export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

```tsx {1|2-4|all}
// page.tsx
export default function Page() {
  return <h1>Hello World</h1>;
}
```

<div v-click style="margin-top: 20px;">
è‡³æ­¤ï¼Œé¡¹ç›®å·²ç»å¯ä»¥é€šè¿‡ <code>nr dev</code> è·‘èµ·æ¥äº†
<img src="/hello-world.jpg" style="margin-top: 20px;" />
</div>

---

# é›†æˆ tailwindcss

<div v-click>

- å®‰è£… tailwindcss

```shell
ni -D tailwindcss postcss autoprefixer
npx tailwindcss init -p # è‡ªåŠ¨ç”Ÿæˆtailwind.config.js å’Œ postcss.config.js
```

</div>

<div v-click>

- ä¿®æ”¹ tailwind.config.js

```js
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

</div>

---

- app æ–‡ä»¶å¤¹ä¸‹æ·»åŠ  global.css

```css {all|1|2|3|4|all}
/* global.css */
@tailwind base;
@tailwind components;
@tailwind utilities;
```

- åœ¨ app/layout.tsx ä¸­å¼•å…¥ global.css

```tsx {all|1|2|all}
// layout.tsx
import './global.css';
```

---

# ç¼–è¾‘å™¨ä»£ç é£æ ¼ç»Ÿä¸€

<div v-click>

- æ ¹ç›®å½•ä¸‹åˆ›å»º **_.editorconfig_** æ–‡ä»¶

```yml
# .editorconfig
root = true

[*]
indent_style = space
indent_size = 2
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.md]
trim_trailing_whitespace = false

[Makefile]
indent_style = tab
```

</div>

---

# Eslint ä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€

<div v-click>

- å®‰è£…ä¾èµ–

```shell
ni -D eslint @antfu/eslint-config
```

</div>

<div v-click>

- æ ¹ç›®å½•ä¸‹åˆ›å»º .eslintrc.js

```js
{
  "extends": "@antfu"
}
```

</div>

<div v-click>

- package.json ä¸­æ·»åŠ  scripts è„šæœ¬

```json
{
  ...
  "scripts": {
    ...
    "lint": "eslint .",
    "lint:fix": "eslint . --fix"
  }
  ...
}
```

</div>

---

# åŒäº‹å…³ç³»æ¶¦æ»‘å‰‚

<div v-click>

- å®‰è£… `husky` å’Œ `lint-staged`

```shell
ni husky lint-staged -D
```

</div>

<div v-click>

- ä¿®æ”¹ **package.json**

```json
// step 1: æ–°å¢ lint-staged prepare è„šæœ¬
"scripts": {
  ...
  // æ–°å¢è¿™äºŒè¡Œ
  "lint-staged": "lint-staged",
  "prepare": "husky install",
  ...
},

// step 2: é…ç½® lint-staged
{
  ...
  "lint-staged": {
    "*": [
      "eslint . --fix"
    ]
  }
}
```

</div>

---

<div>

- ç»ˆç«¯æ‰§è¡Œ `ni` å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆ **.husky** æ–‡ä»¶

</div>

<div v-click>

- æ·»åŠ  git hooks -> pre-commitï¼Œè¿è¡Œå‘½ä»¤åˆ›å»º git hooks

```shell
npx husky add .husky/pre-commit "pnpm lint-staged"
```

</div>

<div v-click>

- è‡³æ­¤ï¼Œæˆ‘ä»¬æ‰§è¡Œ `git add .`ä¹‹å‰ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œ `eslint . --fix` äº†ã€‚é‚£ä¹ˆåœ¨ git æš‚å­˜åŒºçš„ä»£ç å°±æ˜¯ç¬¦åˆ æˆ‘ä»¬å®šä¹‰çš„ eslint è§„èŒƒçš„ä»£ç äº†

</div>

---

# è§„èŒƒ commit-message

<div v-click>

- å®‰è£…è§„èŒƒ commit-message æ‰€éœ€çš„ä¾èµ–åŒ…

```shell
ni -D @commitlint/config-conventional @commitlint/cli cz-git
```

</div>

<div v-click>

- æ·»åŠ  git hooks -> commit-msgï¼Œè¿è¡Œä¸€ä¸‹å‘½ä»¤åˆ›å»º git hooks

```shell
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'
```

</div>

<div v-click>

- ä¿®æ”¹ **package.json** æ·»åŠ  config æŒ‡å®šä½¿ç”¨çš„é€‚é…å™¨ï¼Œä»¥åŠ **commit** è„šæœ¬

```json
{
  "scripts": {
    ...
    "commit": "git add . && cz"
  },
  "config": {
    "commitizen": {
      "path": "node_modules/cz-git"
    }
  }
}
```

</div>

---

- æ ¹ç›®å½•ä¸‹æ–°å»º **commitlint.config.js** (å¤ªé•¿äº†ï¼Œæ”¾ä¸ä¸‹)

  ```js
  /** @type {import('cz-git').UserConfig} */
  module.exports = {
    ignores: [(commit) => commit.includes('init')],
    extends: ['@commitlint/config-conventional'],
    rules: {
      // @see: https://commitlint.js.org/#/reference-rules
    },
    prompt: {
      alias: { fd: 'docs: fix typos' },
      messages: {
        type: 'é€‰æ‹©ä½ è¦æäº¤çš„ç±»å‹ :',
        scope: 'é€‰æ‹©ä¸€ä¸ªæäº¤èŒƒå›´ï¼ˆå¯é€‰ï¼‰:',
        customScope: 'è¯·è¾“å…¥è‡ªå®šä¹‰çš„æäº¤èŒƒå›´ :',
        subject: 'å¡«å†™ç®€çŸ­ç²¾ç‚¼çš„å˜æ›´æè¿° :\n',
        body: 'å¡«å†™æ›´åŠ è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
        breaking: 'åˆ—ä¸¾éå…¼å®¹æ€§é‡å¤§çš„å˜æ›´ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
        footerPrefixsSelect: 'é€‰æ‹©å…³è”issueå‰ç¼€ï¼ˆå¯é€‰ï¼‰:',
        customFooterPrefixs: 'è¾“å…¥è‡ªå®šä¹‰issueå‰ç¼€ :',
        footer: 'åˆ—ä¸¾å…³è”issue (å¯é€‰) ä¾‹å¦‚: #31, #I3244 :\n',
        confirmCommit: 'æ˜¯å¦æäº¤æˆ–ä¿®æ”¹commit ?',
      },
      types: [
        {
          value: 'feat',
          name: 'feat:     ğŸš€  æ–°å¢åŠŸèƒ½ | A new feature',
          emoji: 'ğŸš€',
        },
        {
          value: 'fix',
          name: 'fix:      ğŸ§©  ä¿®å¤ç¼ºé™· | A bug fix',
          emoji: 'ğŸ§©',
        },
        {
          value: 'docs',
          name: 'docs:     ğŸ“š  æ–‡æ¡£æ›´æ–° | Documentation only changes',
          emoji: 'ğŸ“š',
        },
        {
          value: 'style',
          name: 'style:    ğŸ¨  ä»£ç æ ¼å¼ | Changes that do not affect the meaning of the code',
          emoji: 'ğŸ¨',
        },
        {
          value: 'refactor',
          name: 'refactor: â™»ï¸   ä»£ç é‡æ„ | A code change that neither fixes a bug nor adds a feature',
          emoji: 'â™»ï¸',
        },
        {
          value: 'perf',
          name: 'perf:     âš¡ï¸  æ€§èƒ½æå‡ | A code change that improves performance',
          emoji: 'âš¡ï¸',
        },
        {
          value: 'test',
          name: 'test:     âœ…  æµ‹è¯•ç›¸å…³ | Adding missing tests or correcting existing tests',
          emoji: 'âœ…',
        },
        {
          value: 'build',
          name: 'build:    ğŸ“¦ï¸  æ„å»ºç›¸å…³ | Changes that affect the build system or external dependencies',
          emoji: 'ğŸ“¦ï¸',
        },
        {
          value: 'ci',
          name: 'ci:       ğŸ¡  æŒç»­é›†æˆ | Changes to our CI configuration files and scripts',
          emoji: 'ğŸ¡',
        },
        {
          value: 'chore',
          name: 'chore:    ğŸ”¨  å…¶ä»–ä¿®æ”¹ | Other changes that do not modify src or test files',
          emoji: 'ğŸ”¨',
        },
        {
          value: 'revert',
          name: 'revert:   âªï¸  å›é€€ä»£ç  | Revert to a commit',
          emoji: 'âªï¸',
        },
      ],
      useEmoji: true,
      emojiAlign: 'center',
      themeColorCode: '',
      scopes: [],
      allowCustomScopes: true,
      allowEmptyScopes: true,
      customScopesAlign: 'bottom',
      customScopesAlias: 'custom',
      emptyScopesAlias: 'empty',
      upperCaseSubject: false,
      markBreakingChangeMode: false,
      allowBreakingChanges: ['feat', 'fix'],
      breaklineNumber: 100,
      breaklineChar: '|',
      skipQuestions: [],
      issuePrefixs: [
        // å¦‚æœä½¿ç”¨ gitee ä½œä¸ºå¼€å‘ç®¡ç†
        { value: 'link', name: 'link:     é“¾æ¥ ISSUES è¿›è¡Œä¸­' },
        { value: 'closed', name: 'closed:   æ ‡è®° ISSUES å·²å®Œæˆ' },
      ],
      customIssuePrefixsAlign: 'top',
      emptyIssuePrefixsAlias: 'skip',
      customIssuePrefixsAlias: 'custom',
      allowCustomIssuePrefixs: true,
      allowEmptyIssuePrefixs: true,
      confirmColorize: true,
      maxHeaderLength: Infinity,
      maxSubjectLength: Infinity,
      minSubjectLength: 0,
      scopeOverrides: undefined,
      defaultBody: '',
      defaultIssues: '',
      defaultScope: '',
      defaultSubject: '',
    },
  };
  ```

---

# Vitest

<div v-click>

- å®‰è£…ä¾èµ–

```shell
ni -D vitest @vitejs/plugin-react jsdom
```

</div>

<div v-click>

- åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º `vitest.config.ts`

```ts
/// <reference types="vitest" />

import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
  },
});
```

</div>

---

- **package.json** æ·»åŠ  **scripts** è„šæœ¬

```json {all|5|all}
{
  ...
  "scripts": {
    ...
    "test": "vitest"
  }
}
```

<div v-click>

- ä¹‹åå°±å¯ä»¥ç¼–å†™æµ‹è¯•ä»£ç ï¼Œé€šè¿‡æ‰§è¡Œ `nr test` è¿›è¡Œæµ‹è¯•

</div>
